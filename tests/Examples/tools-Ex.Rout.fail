
Rho Under development (unstable) (2020-03-25 rf90b4e054c) -- "R(C) -> Rho(C++)"
Rho Copyright (C) 2008-2014 Andrew R. Runnalls

R Under development (unstable) (2017-01-17 r72000) -- "Frisbee Sailing"
Copyright (C) 2020 The R Foundation for Statistical Computing
Platform: x86_64-pc-linux-gnu (64-bit)

Rho is not part of the R project, so please do not report bugs
via r-bugs or the R website - instead refer to the author.

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

  Natural language support but running in an English locale

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

> pkgname <- "tools"
> source(file.path(R.home("share"), "R", "examples-header.R"))
> options(warn = 1)
> library('tools')
> 
> base::assign(".oldSearch", base::search(), pos = 'CheckExEnv')
> cleanEx()
> nameEx("CRANtools")
> ### * CRANtools
> 
> flush(stderr()); flush(stdout())
> 
> ### Name: CRANtools
> ### Title: CRAN Package Repository Tools
> ### Aliases: CRAN_package_db CRAN_check_results CRAN_check_details
> ###   CRAN_memtest_notes summarize_CRAN_check_status
> 
> ### ** Examples
> 
> ## IGNORE_RDIFF_BEGIN
> pdb <- CRAN_package_db()
> dim(pdb)
[1] 15541    64
> ## DESCRIPTION fields included:
> colnames(pdb)
 [1] "Package"                 "Version"                
 [3] "Priority"                "Depends"                
 [5] "Imports"                 "LinkingTo"              
 [7] "Suggests"                "Enhances"               
 [9] "License"                 "License_is_FOSS"        
[11] "License_restricts_use"   "OS_type"                
[13] "Archs"                   "MD5sum"                 
[15] "NeedsCompilation"        "Additional_repositories"
[17] "Author"                  "Authors@R"              
[19] "Biarch"                  "BugReports"             
[21] "BuildKeepEmpty"          "BuildManual"            
[23] "BuildResaveData"         "BuildVignettes"         
[25] "Built"                   "ByteCompile"            
[27] "Classification/ACM"      "Classification/ACM-2012"
[29] "Classification/JEL"      "Classification/MSC"     
[31] "Classification/MSC-2010" "Collate"                
[33] "Collate.unix"            "Collate.windows"        
[35] "Contact"                 "Copyright"              
[37] "Date"                    "Description"            
[39] "Encoding"                "KeepSource"             
[41] "Language"                "LazyData"               
[43] "LazyDataCompression"     "LazyLoad"               
[45] "MailingList"             "Maintainer"             
[47] "Note"                    "Packaged"               
[49] "RdMacros"                "SysDataCompression"     
[51] "SystemRequirements"      "Title"                  
[53] "Type"                    "URL"                    
[55] "VignetteBuilder"         "ZipData"                
[57] "Published"               "Path"                   
[59] "X-CRAN-Comment"          "Reverse depends"        
[61] "Reverse imports"         "Reverse linking to"     
[63] "Reverse suggests"        "Reverse enhances"       
> ## Summarize publication dates:
> summary(as.Date(pdb$Published))
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max. 
"2006-03-15" "2017-02-22" "2018-12-21" "2018-03-20" "2019-12-01" "2020-03-26" 
> ## Summarize numbers of packages according to maintainer:
> summary(lengths(split(pdb$Package, pdb$Maintainer)))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  1.000   1.000   1.000   1.695   2.000  63.000 
> ## Packages with 'LASSO' in their Description:
> pdb$Package[grepl("LASSO", pdb$Description)]
 [1] "apple"             "CovSelHigh"        "crrp"             
 [4] "expandFunctions"   "extlasso"          "fastcmprsk"       
 [7] "FeaLect"           "FindIt"            "fsMTS"            
[10] "gcdnet"            "glassoFast"        "glmaag"           
[13] "glmvsd"            "HTLR"              "ISBF"             
[16] "MetabolicSurv"     "milr"              "mpath"            
[19] "MTE"               "MVB"               "ncpen"            
[22] "nets"              "NPMLENCC"          "onlineVAR"        
[25] "pgee.mixed"        "polywog"           "ppmlasso"         
[28] "rbridge"           "rqPen"             "rrat"             
[31] "SentimentAnalysis" "SparseBiplots"     "SSLASSO"          
[34] "stR"              
> 
> results <- CRAN_check_results()
> ## Available variables:
> names(results)
 [1] "Flavor"     "Package"    "Version"    "Priority"   "Maintainer"
 [6] "Status"     "Flags"      "T_install"  "T_check"    "T_total"   
> ## Tabulate overall check status according to flavor:
> with(results, table(Flavor, Status))
                                   Status
Flavor                              ERROR  FAIL  NOTE    OK  WARN
  r-devel-linux-x86_64-debian-clang   159     1  2526 12686    77
  r-devel-linux-x86_64-debian-gcc     165     2  2522 12746    53
  r-devel-linux-x86_64-fedora-clang   165     0  4748 10452   115
  r-devel-linux-x86_64-fedora-gcc     156     0  4071 11217    37
  r-devel-windows-ix86+x86_64         406     2  2466 12339   114
  r-devel-windows-ix86+x86_64-gcc8     84     3  2617 12457    65
  r-patched-linux-x86_64               51     3  2162 13218    27
  r-patched-solaris-x86               281     0  3815 11021   229
  r-release-linux-x86_64               51     3  2154 13240    40
  r-release-windows-ix86+x86_64       103     4  2404 12878    32
  r-release-osx-x86_64                249    95  3883 10766   480
  r-oldrel-windows-ix86+x86_64        229     9  2370 12651    69
  r-oldrel-osx-x86_64                 489    10  3805 10813   355
> 
> details <- CRAN_check_details()
> ## Available variables:
> names(details)
[1] "Package"    "Version"    "Flavor"     "Check"      "Status"    
[6] "Output"     "Flags"      "Maintainer"
> ## Tabulate checks according to their status:
> tab <- with(details, table(Check, Status))
> ## Inspect some installation problems:
> bad <- subset(details,
+               ((Check == "whether package can be installed") &
+                (Status != "OK")))
> head(bad[sample(seq_len(NROW(bad)), NROW(bad)), ])
Package: mongolite 2.1.0
Flavor: r-devel-windows-ix86+x86_64-gcc8
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    ./bson/bson-macros.h:180:19: warning: ISO C does not support '__FUNCTION__' predefined identifier [-Wpedantic]
  See 'd:/Rcompile/CRANpkg/local/4.0gcc8/mongolite.Rcheck/00install.out' for details.

Package: rmdcev 1.1.1
Flavor: r-release-windows-ix86+x86_64
Check: whether package can be installed, Result: ERROR
  Installation failed.
  See 'd:/Rcompile/CRANpkg/local/3.6/rmdcev.Rcheck/00install.out' for details.

Package: RcmdrPlugin.PcaRobust 1.1.4
Flavor: r-release-osx-x86_64
Check: whether package can be installed, Result: FAIL
  

Package: plsVarSel 0.9.5
Flavor: r-oldrel-osx-x86_64
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE
  See ‘/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/plsVarSel.Rcheck/00install.out’ for details.

Package: psSubpathway 0.1.1
Flavor: r-devel-windows-ix86+x86_64
Check: whether package can be installed, Result: ERROR
  Installation failed.
  See 'd:/Rcompile/CRANpkg/local/4.0/psSubpathway.Rcheck/00install.out' for details.

Package: orthoDr 0.6.4
Flavor: r-oldrel-osx-x86_64
Check: whether package can be installed, Result: WARNING
  Found the following significant warnings:
    Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE
  See ‘/Volumes/SSD-Data/Builds/R-dev-web/QA/Simon/packages/el-capitan-x86_64/results/3.5/orthoDr.Rcheck/00install.out’ for details.
> 
> mtnotes <- CRAN_memtest_notes()
> head(mtnotes)
list()
> ## Show counts of issues according to test:
> table(do.call(rbind, mtnotes)[, "Test"])
< table of extent 0 >
> 
> ## Summarize CRAN check status for 10 random packages
> ## (reusing the information already read in):
> pos <- sample(seq_len(NROW(pdb)), 10L)
> summarize_CRAN_check_status(pdb[pos, "Package"],
+                             results, details, mtnotes)
Error in `[.default`(table(r$Status), c("ERROR", "WARN", "NOTE", "OK")) : 
  subscript out of bounds
Calls: summarize_CRAN_check_status ... <- -> [ -> [ -> [.table -> <- -> NextMethod -> [.default

Traceback:
 1: `[.default`(table(r$Status), c("ERROR", "WARN", "NOTE", "OK"))
 2: NextMethod()
 3: ret <- NextMethod()
 4: `[.table`(table(r$Status), c("ERROR", "WARN", "NOTE", "OK"))
 5: table(r$Status)[c("ERROR", "WARN", "NOTE", "OK")]
 6: table(r$Status)[c("ERROR", "WARN", "NOTE", "OK")]
 7: tab <- table(r$Status)[c("ERROR", "WARN", "NOTE", "OK")]
 8: summarize_results(p, r)
 9: c(summarize_results(p, r), summarize_mtnotes(p, m), summarize_details(p,     d))
10: list(...)
11: paste(c(summarize_results(p, r), summarize_mtnotes(p, m), summarize_details(p,     d)), collapse = "\n\n")
12: summarize(p, results[[p]], details[[p]], mtnotes[[p]])
13: FUN(X[[i]], ...)
14: lapply(package, function(p) {    summarize(p, results[[p]], details[[p]], mtnotes[[p]])})
15: unlist(lapply(package, function(p) {    summarize(p, results[[p]], details[[p]], mtnotes[[p]])}))
16: s <- if (length(package) == 1L) {    summarize(package, results, details, mtnotes[[package]])} else {    results <- split(results, factor(results$Package, package))    details <- split(details, factor(details$Package, package))    unlist(lapply(package, function(p) {        summarize(p, results[[p]], details[[p]], mtnotes[[p]])    }))}
17: summarize_CRAN_check_status(pdb[pos, "Package"], results, details,     mtnotes)

Execution halted
