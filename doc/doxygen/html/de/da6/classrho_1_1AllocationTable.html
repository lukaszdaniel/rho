<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>rho: rho::AllocationTable Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">rho
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../da/d17/namespacerho.html">rho</a></li><li class="navelem"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html">AllocationTable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="../../d7/ded/classrho_1_1AllocationTable-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">rho::AllocationTable Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d6a/classrho_1_1AllocationTable_1_1Allocation.html">Allocation</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A hash bucket for the allocation table.  <a href="../../dd/d6a/classrho_1_1AllocationTable_1_1Allocation.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acfe2a3df1d4d5be445e2a4ed0abe85bf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#acfe2a3df1d4d5be445e2a4ed0abe85bf">AllocationTable</a> (unsigned num_bits)</td></tr>
<tr class="memdesc:acfe2a3df1d4d5be445e2a4ed0abe85bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a new allocation table of the give size.  <a href="#acfe2a3df1d4d5be445e2a4ed0abe85bf">More...</a><br /></td></tr>
<tr class="separator:acfe2a3df1d4d5be445e2a4ed0abe85bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a08db5d41e1ffd50b3a1e0c594685748e"><td class="memItemLeft" align="right" valign="top"><a id="a08db5d41e1ffd50b3a1e0c594685748e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#a08db5d41e1ffd50b3a1e0c594685748e">~AllocationTable</a> ()</td></tr>
<tr class="memdesc:a08db5d41e1ffd50b3a1e0c594685748e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees the memory used by the hashtable, but not the allocations in it. <br /></td></tr>
<tr class="separator:a08db5d41e1ffd50b3a1e0c594685748e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea78cbd3682fffa5bd82064bfed04666"><td class="memItemLeft" align="right" valign="top"><a id="aea78cbd3682fffa5bd82064bfed04666"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>AllocationTable</b> (const <a class="el" href="../../de/da6/classrho_1_1AllocationTable.html">AllocationTable</a> &amp;table)=delete</td></tr>
<tr class="separator:aea78cbd3682fffa5bd82064bfed04666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a503b4e7176d38e56e1e53bfd86ebae6b"><td class="memItemLeft" align="right" valign="top"><a id="a503b4e7176d38e56e1e53bfd86ebae6b"></a>
<a class="el" href="../../de/da6/classrho_1_1AllocationTable.html">AllocationTable</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="../../de/da6/classrho_1_1AllocationTable.html">AllocationTable</a> &amp;table)=delete</td></tr>
<tr class="separator:a503b4e7176d38e56e1e53bfd86ebae6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab74c038370ea661e978a15fb5cfccb8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#ab74c038370ea661e978a15fb5cfccb8a">applyToAllAllocations</a> (std::function&lt; void(void *)&gt; fun) const</td></tr>
<tr class="memdesc:ab74c038370ea661e978a15fb5cfccb8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates over all current allocations and calls the argument function on their pointers.  <a href="#ab74c038370ea661e978a15fb5cfccb8a">More...</a><br /></td></tr>
<tr class="separator:ab74c038370ea661e978a15fb5cfccb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb92df61b5c1a26e5c81e1cfea2f45c3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#abb92df61b5c1a26e5c81e1cfea2f45c3">erase</a> (uintptr_t pointer, size_t size_log2)</td></tr>
<tr class="separator:abb92df61b5c1a26e5c81e1cfea2f45c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfebdb7a7651c121c5df4f99bb7a965e"><td class="memItemLeft" align="right" valign="top"><a id="acfebdb7a7651c121c5df4f99bb7a965e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#acfebdb7a7651c121c5df4f99bb7a965e">insert</a> (void *allocation, size_t size_log2)</td></tr>
<tr class="memdesc:acfebdb7a7651c121c5df4f99bb7a965e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a large object allocation, not a superblock, into the allocations hashtable. <br /></td></tr>
<tr class="separator:acfebdb7a7651c121c5df4f99bb7a965e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa778c86efacdcefcb4d8d2d637797f3c"><td class="memItemLeft" align="right" valign="top"><a id="aa778c86efacdcefcb4d8d2d637797f3c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#aa778c86efacdcefcb4d8d2d637797f3c">insertSuperblock</a> (<a class="el" href="../../db/dc2/classrho_1_1AllocatorSuperblock.html">AllocatorSuperblock</a> *superblock, size_t size_log2)</td></tr>
<tr class="memdesc:aa778c86efacdcefcb4d8d2d637797f3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a superblock a superblock allocation into the allocations hashtable. <br /></td></tr>
<tr class="separator:aa778c86efacdcefcb4d8d2d637797f3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff50a37be378ae1e7478af17dc021052"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dd/d6a/classrho_1_1AllocationTable_1_1Allocation.html">Allocation</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#aff50a37be378ae1e7478af17dc021052">search</a> (uintptr_t candidate) const</td></tr>
<tr class="memdesc:aff50a37be378ae1e7478af17dc021052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a bucket matching the argument pointer.  <a href="#aff50a37be378ae1e7478af17dc021052">More...</a><br /></td></tr>
<tr class="separator:aff50a37be378ae1e7478af17dc021052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d9e5243ecd16aee774cac6b8e358a5c"><td class="memItemLeft" align="right" valign="top"><a id="a6d9e5243ecd16aee774cac6b8e358a5c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#a6d9e5243ecd16aee774cac6b8e358a5c">printSummary</a> () const</td></tr>
<tr class="memdesc:a6d9e5243ecd16aee774cac6b8e358a5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints a summary of the table illustrating the bucket utilization. <br /></td></tr>
<tr class="separator:a6d9e5243ecd16aee774cac6b8e358a5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef475361eb1ddef1c35b3192e038774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da6/classrho_1_1AllocationTable.html#a4ef475361eb1ddef1c35b3192e038774">resize</a> (unsigned new_alloctable_bits)</td></tr>
<tr class="separator:a4ef475361eb1ddef1c35b3192e038774"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../d0/deb/AllocationTable_8hpp_source.html#l00063">63</a> of file <a class="el" href="../../d0/deb/AllocationTable_8hpp_source.html">AllocationTable.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acfe2a3df1d4d5be445e2a4ed0abe85bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfe2a3df1d4d5be445e2a4ed0abe85bf">&#9670;&nbsp;</a></span>AllocationTable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">rho::AllocationTable::AllocationTable </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>num_bits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a new allocation table of the give size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num_bits</td><td>the number of bits to use for hashing. The number of buckets is 2^num_bits. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html#l00038">38</a> of file <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab74c038370ea661e978a15fb5cfccb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab74c038370ea661e978a15fb5cfccb8a">&#9670;&nbsp;</a></span>applyToAllAllocations()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rho::AllocationTable::applyToAllAllocations </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; void(void *)&gt;&#160;</td>
          <td class="paramname"><em>fun</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterates over all current allocations and calls the argument function on their pointers. </p>
<p>Eeven though multiple entries are stored per allocation, the argument function is only called once per allocation. The first flag of the allocation buckets are used to ensure this. Only the first entry is used as the representative entry of each allocation.</p>
<p>It is okay to free objects during the iteration, but adding objects means they may not be found during the current iteration pass. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html#l00178">178</a> of file <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a>.</p>

</div>
</div>
<a id="abb92df61b5c1a26e5c81e1cfea2f45c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb92df61b5c1a26e5c81e1cfea2f45c3">&#9670;&nbsp;</a></span>erase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rho::AllocationTable::erase </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size_log2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Erases all hashtable entries for an allocation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size_log2</td><td>the 2-log of the allocation size. Determines how many hash buckets are removed. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html#l00089">89</a> of file <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a>.</p>

</div>
</div>
<a id="a4ef475361eb1ddef1c35b3192e038774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef475361eb1ddef1c35b3192e038774">&#9670;&nbsp;</a></span>resize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rho::AllocationTable::resize </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>new_alloctable_bits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Attempts to resize the hashtable to use a new number of bits for hash keys. The resize fails if the number of collisions for a single entry exceeds MAX_REBALANCE_COLLISIONS. </p><dl class="section return"><dt>Returns</dt><dd>true if the resize succeeded. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html#l00155">155</a> of file <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a>.</p>

</div>
</div>
<a id="aff50a37be378ae1e7478af17dc021052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff50a37be378ae1e7478af17dc021052">&#9670;&nbsp;</a></span>search()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d6a/classrho_1_1AllocationTable_1_1Allocation.html">rho::AllocationTable::Allocation</a> * rho::AllocationTable::search </td>
          <td>(</td>
          <td class="paramtype">uintptr_t&#160;</td>
          <td class="paramname"><em>candidate</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a bucket matching the argument pointer. </p>
<p>This function does find internal pointers. This is supported by mapping all possible internal hash keys into the allocation table. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html#l00123">123</a> of file <a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/home/monia/dev/rho/src/include/rho/<a class="el" href="../../d0/deb/AllocationTable_8hpp_source.html">AllocationTable.hpp</a></li>
<li>/home/monia/dev/rho/src/main/<a class="el" href="../../d4/db0/AllocationTable_8cpp_source.html">AllocationTable.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Mar 30 2020 17:03:33 for rho by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
